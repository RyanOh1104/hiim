{% extends 'main/base.html' %}
{% load mathfilters %}
{% load static %}
{% block css %}
<link rel="stylesheet" href="{% static 'dansang/dansang.css' %}">
{% endblock %}

{% block title %} 생각의 씨앗 {% endblock %}

{% load crispy_forms_tags %}

{% block content %}
<div class="row block-spacing"></div>

<div class="row top-block">
    <div class="col col-12 text-left">
        <span class="archive-title">생각의 씨앗</span><span class="archive-icon">🌱</span>
    </div>
    <div class="col col-12 text-left">
        <div class="archive-subtitle">다채로운 생각과 관점을 갖기 위해서는 다양한 <span class="seed-intro">인풋(input)</span>이 필수라고 믿어요.<br>
            이러한 자극들은 좋은 <span class="seed-intro">생각의 씨앗</span>이 되어 언젠가는 나만의 <span class="seed-intro">아웃풋(output)</span>으로 자라납니다!<br>
            <span class="helptext">*씨앗은 하루에 하나씩 추가돼요!</span></div>
    </div>
</div>
<br>
<!-- <div class="row">
    <div class="col col-6 button-new">
        <a href="/dansang/dansanginput">
            <button class="all-buttons btn-lg btn-sm btn-primary">✒️ 생각 끄적이기</button>
        </a>
    </div>
</div> -->

<div class="row">
    <div class="col col-6">
        <div class="dropdown">
            <button class="btn btn-primary dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
              <strong>씨앗 카테고리</strong>
            </button>
            <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
              <button class="dropdown-item" id="seeAllCat">전체 보기</button>
              <div class="dropdown-divider"></div>
              {% for cat in categoriesInEng %}
              <button class="dropdown-item {{cat.category_eng}}" id="{{cat.category_eng}}">{{cat.in_kor}}</button>
              {% endfor %}
            </div>
          </div>
    </div>
</div>


{% for item in seeds %}
<div class="row seed-row allCat all-{{item.category_eng}}">
    <a href="{{item.url}}" class="all-links seed-links" id="seed-{{forloop.counter}}" target="_blank" rel="noopener noreferrer">
    <div class="col">
        <span class="seed-title">{{item.title}}</span><br class="mobile-only">
        <span class="seed-subtitle"> | {{item.subtitle}}</span>
    </div>  
    </a>
</div>
{% endfor %}

{% for item in seeds %}
<div class="row seed-row eachCat each-{{item.category_eng}}">
    <a href="{{item.url}}" class="all-links seed-links" id="seed-{{forloop.counter}}" target="_blank" rel="noopener noreferrer">
    <div class="col">
        <span class="seed-title">{{item.title}}</span><br class="mobile-only">
        <span class="seed-subtitle"> | {{item.subtitle}}</span>
    </div>  
    </a>
</div>
{% endfor %}

<div class="manual">
    <button class="btn manual-button" id="manual-dansang">
        📋 사용법
    </button>
</div>
<!-- </div> -->
<div class="block-spacing"></div>
<div class="block-spacing"></div>

<script>
    $(document).ready(function(){
        // 처음에 로드될 때는 숨김
        $('.eachCat').hide();

        $('.dropdown-toggle').dropdown();

        // 새로운 아이템에 뱃지 추가
        $('#seed-1').children('.col').children('.seed-title').append("<span class='badge badge-primary seed-badge'>New!</span>");
        // '전체보기' 클릭했을 때
        $('#seeAllCat').click(function() {
            $('.eachCat').hide();
            $('.allCat').show();
        })

        // 각 카테고리 클릭했을 때
        $('.dropdown-item').click(function(event) {
            var thisCat = String(event.target.id);
            console.log(thisCat)
            console.log(`${thisCat}`)
            if (thisCat === 'seeAllCat') {
                $('.allCat').show();
            } else {
                $('.allCat').hide();
                $('.eachCat').hide();
                $(`.each-${thisCat}`).show();
            } 
        })

    })
</script>
{% endblock %}